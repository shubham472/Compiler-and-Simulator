#include<stdio.h>
#include<stdlib.h>
#include<string.h>
void main()
{
   int i=0,j=0,l=0,k[1000],c,r,t=0,x=0,v=0,C[100];
   char B[100][50],A[100],fr[10],fw[10];
   FILE *fp;
   printf("Give file name for Input: ");
   scanf("%s",fr);
   fp=fopen(fr,"r");
   do{
       fscanf(fp,"%s",B[i]);
       i++;
     } while(strcmp(B[i-1],"end"));
   printf("Give filename for Output: ");
   scanf("%s",fw);
   fp=fopen(fw,"w");
   i=0;
   while(1)
   {   strcpy(A,B[i]);
       if((A[1]=='=')&&(A[2]<59))
       {
          k[j++]=30; k[j++]=A[0]-96; k[j++]=A[2]-48;
       }
       else if(A[1]=='=' && A[3]=='+')
       {
          k[j++]=26; k[j++]=A[0]-96; k[j++]=A[2]-96; k[j++]=A[4]-96;
       }
       else if(A[1]=='=' && A[3]=='-')
       {
          k[j++]=27; k[j++]=A[0]-96; k[j++]=A[2]-96; k[j++]=A[4]-96;
       }
       else if(A[1]=='=' && A[0]<123 && A[3]=='*')
       {
          k[j++]=28; k[j++]=A[0]-96; k[j++]=A[2]-96; k[j++]=A[4]-96;
       }
       else if(A[1]=='=' && A[3]=='/')
       {
          k[j++]=29; k[j++]=A[0]-96; k[j++]=A[2]-96; k[j++]=A[4]-96;
       }
       else if(A[0]=='p' && A[1]=='r')
       {
          k[j++]=31; k[j++]=A[6]-96;
       }
       else if(A[0]=='s' && A[1]=='c')
       {
          k[j++]=32; k[j++]=A[6]-96;
       }
       else if(A[0]=='i'&& A[1]=='f' && A[4]=='>')
       {
          k[j++]=27; k[j++]=18; k[j++]=A[5]-96; k[j++]=A[3]-96;
          k[j++]=30; k[j++]=11; r=j; j++;
          k[j++]=28; k[j++]=13; k[j++]=11; k[j++]=25;
          k[j++]=26; k[j++]=23; k[j++]=23; k[j++]=13;
          c=j;
       }
       else if(A[0]==']'){ k[r]=j-c; }
       else if(A[0]=='}'){ k[j++]=43; k[j++]=23; t=j; }
       else if(A[0]=='d'&& A[1]=='o'){ c=j; }
       else if( A[1]=='w'&& A[3]=='i'&& A[8]=='<')
       {
         c=j-c;
         k[j++]=27; k[j++]=17; k[j++]=A[9]-96; k[j++]=A[7]-96;
         k[j++]=30; k[j++]=16; k[j++]=c+15;
         k[j++]=28; k[j++]=13; k[j++]=16; k[j++]=25;
         k[j++]=27; k[j++]=23; k[j++]=23; k[j++]=13;
       }
       else if(A[0]=='v' && A[1]=='o' && A[7]=='{'){ C[A[4]-96]=j; t=t+j;}
       else if(A[0]=='v' && A[1]=='o' && A[10]=='{')
       {
           v=A[4]-96;
           C[v++]=j; t=t+j;
           C[v++]=A[6]-96; C[v++]=A[8]-96;
       }
       else if(A[0]>48 && A[1]=='(' && A[2]==')')
       {
         k[j++]=30; k[j++]=16; k[j++]=5;
         k[j++]=26; k[j++]=16; k[j++]=16; k[j++]=23;
         k[j++]=42; k[j++]=16;
         k[j++]=30; k[j++]=23; k[j++]=C[A[0]-96];
       }

       else if(A[0]>48 && A[1]=='=' && A[3]=='(' && A[7]==')')
       {
         v=A[2]-96;
         k[j++]=33; k[j++]=C[v+1]; k[j++]=A[4]-96;
         k[j++]=33; k[j++]=C[v+2]; k[j++]=A[6]-96;
         //C[0]=A[4]-96;
         //C[1]=A[6]-96;
         k[j++]=30; k[j++]=16; k[j++]=6;
         k[j++]=26; k[j++]=16; k[j++]=16; k[j++]=23;
         k[j++]=42; k[j++]=16;
         k[j++]=47;
         k[j++]=30; k[j++]=23; k[j++]=C[A[2]-96];
         k[j++]=33; k[j++]=A[0]-96; k[j++]=49;
       }
       else if(A[0]=='r' && A[1]=='e')
       {
        k[j++]=33; k[j++]=49; k[j++]=A[6]-96;
        k[j++]=48;
       }
       else if(A[0]=='m' && A[1]=='a'){  t=j; }
       else if(A[0]=='p' && A[1]=='u'){ k[j++]=42; k[j++]=A[5]-96;}
       else if(A[0]=='p' && A[1]=='o'){ k[j++]=43; k[j++]=A[4]-96;}
       else if(A[0]=='s' && A[1]=='t'){ k[j++]=40; k[j++]=t;}
       else if(A[0]=='e'&& A[1]=='n'){  k[j++]=99;  break; }
       i++;
     }

     for(j=0;k[j]!=99;j++){
         fprintf(fp,"%d ",k[j]);
         printf("%d ",k[j]);
     }
     fprintf(fp," 99");
     printf("99");
}
